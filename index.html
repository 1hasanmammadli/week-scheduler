<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6B21A8">
    <meta name="description" content="Plan your week, stay organized with this beautiful weekly scheduler">
    <title>Weekly Scheduler</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAVlJREFUWEftl7FKA0EQhv+ZC4iNjWBhYWFjI2hjYWFhZWEhKFgIgmBhYSFYWFhYWFjYWFhY2AgWFhYWFhYWFjZCECy8N7PDbbK72dskF0GbNJfb2W/+nZ3ZJfAfF/3H+jEAXkEkBwDaALQA7AI4BnCiqo9/AuASgDMAswA6ADwCuABwA+AOwK2qfk4E4BJYBbAEYB7AHIBZANsAVgBsAjhR1c+xAVwCywD2AewAaAHYAHAEYAnAFoCjfxHoAlgFcBxOXgLQBLDuEgi7rwM4UNW3kQGuAVsXAM4BrAE4DAnY7tsATlX1Y2iAa8CWzf4AwC2AQwDnAM4AHAO4UtXPgQGuAVsWgDXgEsCFqp6F3S8DsFXXgJUDuAZsWQAWgD0AF4EFW3UNWDmAa8CWBWBPcBd2twCsAbs/NWDlAK4BW7thdwvAAjgJz9EqACtX9iesBKCuR1UO8A3bUDYhz/JjVAAAAABJRU5ErkJggg==">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
        * { box-sizing: border-box; }
        input[type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React Icons as components
        const Plus = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Clock = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Calendar = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Check = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        // Storage API simulation using localStorage
        const storage = {
            get: (key) => {
                return new Promise((resolve) => {
                    const value = localStorage.getItem(key);
                    if (value) {
                        resolve({ key, value });
                    } else {
                        resolve(null);
                    }
                });
            },
            set: (key, value) => {
                return new Promise((resolve) => {
                    localStorage.setItem(key, value);
                    resolve({ key, value });
                });
            }
        };

        function WeekScheduler() {
            const [tasks, setTasks] = useState({});
            const [selectedDay, setSelectedDay] = useState(new Date().getDay());
            const [newTask, setNewTask] = useState({ title: '', time: '', description: '' });
            const [isAdding, setIsAdding] = useState(false);

            const days = [
                { id: 0, name: 'Sunday', short: 'Sun' },
                { id: 1, name: 'Monday', short: 'Mon' },
                { id: 2, name: 'Tuesday', short: 'Tue' },
                { id: 3, name: 'Wednesday', short: 'Wed' },
                { id: 4, name: 'Thursday', short: 'Thu' },
                { id: 5, name: 'Friday', short: 'Fri' },
                { id: 6, name: 'Saturday', short: 'Sat' }
            ];

            useEffect(() => {
                loadTasks();
            }, []);

            const loadTasks = async () => {
                try {
                    const result = await storage.get('weekly-schedule');
                    if (result) {
                        setTasks(JSON.parse(result.value));
                    }
                } catch (error) {
                    console.log('No saved schedule found');
                }
            };

            const saveTasks = async (updatedTasks) => {
                try {
                    await storage.set('weekly-schedule', JSON.stringify(updatedTasks));
                } catch (error) {
                    console.error('Failed to save tasks');
                }
            };

            const addTask = () => {
                if (!newTask.title.trim()) return;
                
                const dayTasks = tasks[selectedDay] || [];
                const task = {
                    id: Date.now(),
                    title: newTask.title,
                    time: newTask.time,
                    description: newTask.description,
                    completed: false
                };
                
                const updatedTasks = {
                    ...tasks,
                    [selectedDay]: [...dayTasks, task].sort((a, b) => 
                        a.time.localeCompare(b.time)
                    )
                };
                
                setTasks(updatedTasks);
                saveTasks(updatedTasks);
                setNewTask({ title: '', time: '', description: '' });
                setIsAdding(false);
            };

            const deleteTask = (dayId, taskId) => {
                const updatedTasks = {
                    ...tasks,
                    [dayId]: tasks[dayId].filter(t => t.id !== taskId)
                };
                setTasks(updatedTasks);
                saveTasks(updatedTasks);
            };

            const toggleComplete = (dayId, taskId) => {
                const updatedTasks = {
                    ...tasks,
                    [dayId]: tasks[dayId].map(t => 
                        t.id === taskId ? { ...t, completed: !t.completed } : t
                    )
                };
                setTasks(updatedTasks);
                saveTasks(updatedTasks);
            };

            const currentDayTasks = tasks[selectedDay] || [];
            const completedCount = currentDayTasks.filter(t => t.completed).length;

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
                    <div className="max-w-6xl mx-auto">
                        <div className="text-center mb-8">
                            <div className="inline-flex items-center gap-3 mb-3">
                                <Calendar size={32} />
                                <h1 className="text-4xl font-bold text-white">Weekly Scheduler</h1>
                            </div>
                            <p className="text-purple-300">Plan your week, stay organized</p>
                        </div>

                        <div className="grid grid-cols-7 gap-2 mb-8">
                            {days.map(day => {
                                const dayTaskCount = (tasks[day.id] || []).length;
                                const isToday = day.id === new Date().getDay();
                                const isSelected = day.id === selectedDay;
                                
                                return (
                                    <button
                                        key={day.id}
                                        onClick={() => setSelectedDay(day.id)}
                                        className={`relative p-4 rounded-2xl transition-all duration-300 ${
                                            isSelected
                                                ? 'bg-gradient-to-br from-purple-500 to-pink-500 shadow-lg shadow-purple-500/50 scale-105'
                                                : 'bg-white/10 backdrop-blur-sm hover:bg-white/20'
                                        }`}
                                    >
                                        {isToday && (
                                            <div className="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-slate-900"></div>
                                        )}
                                        <div className="text-white font-bold text-sm mb-1">{day.short}</div>
                                        {dayTaskCount > 0 && (
                                            <div className="text-xs text-purple-200 bg-white/20 rounded-full px-2 py-0.5">
                                                {dayTaskCount}
                                            </div>
                                        )}
                                    </button>
                                );
                            })}
                        </div>

                        <div className="bg-white/10 backdrop-blur-md rounded-3xl p-6 shadow-2xl border border-white/20">
                            <div className="flex items-center justify-between mb-6 pb-4 border-b border-white/20">
                                <div>
                                    <h2 className="text-3xl font-bold text-white mb-1">
                                        {days[selectedDay].name}
                                    </h2>
                                    {currentDayTasks.length > 0 && (
                                        <p className="text-purple-300 text-sm">
                                            {completedCount} of {currentDayTasks.length} completed
                                        </p>
                                    )}
                                </div>
                                <button
                                    onClick={() => setIsAdding(!isAdding)}
                                    className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg hover:shadow-purple-500/50 transition-all duration-300"
                                >
                                    <Plus />
                                    <span className="font-semibold">Add Task</span>
                                </button>
                            </div>

                            {isAdding && (
                                <div className="mb-6 p-4 bg-white/5 rounded-2xl border border-white/10">
                                    <input
                                        type="text"
                                        placeholder="Task title"
                                        value={newTask.title}
                                        onChange={(e) => setNewTask({ ...newTask, title: e.target.value })}
                                        className="w-full px-4 py-3 mb-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    />
                                    <input
                                        type="time"
                                        value={newTask.time}
                                        onChange={(e) => setNewTask({ ...newTask, time: e.target.value })}
                                        className="w-full px-4 py-3 mb-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    />
                                    <textarea
                                        placeholder="Description (optional)"
                                        value={newTask.description}
                                        onChange={(e) => setNewTask({ ...newTask, description: e.target.value })}
                                        className="w-full px-4 py-3 mb-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
                                        rows="2"
                                    />
                                    <div className="flex gap-2">
                                        <button
                                            onClick={addTask}
                                            className="flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:shadow-lg hover:shadow-green-500/50 transition-all duration-300 font-semibold"
                                        >
                                            Save Task
                                        </button>
                                        <button
                                            onClick={() => {
                                                setIsAdding(false);
                                                setNewTask({ title: '', time: '', description: '' });
                                            }}
                                            className="px-4 py-2 bg-white/10 text-white rounded-xl hover:bg-white/20 transition-all duration-300"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {currentDayTasks.length === 0 ? (
                                    <div className="text-center py-12">
                                        <Calendar size={64} />
                                        <p className="text-purple-300 text-lg mt-4">No tasks scheduled</p>
                                        <p className="text-purple-400 text-sm mt-2">Add your first task to get started</p>
                                    </div>
                                ) : (
                                    currentDayTasks.map(task => (
                                        <div
                                            key={task.id}
                                            className={`group p-4 rounded-2xl transition-all duration-300 ${
                                                task.completed
                                                    ? 'bg-white/5 border border-green-500/30'
                                                    : 'bg-white/10 border border-white/20 hover:bg-white/15'
                                            }`}
                                        >
                                            <div className="flex items-start gap-4">
                                                <button
                                                    onClick={() => toggleComplete(selectedDay, task.id)}
                                                    className={`flex-shrink-0 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-300 ${
                                                        task.completed
                                                            ? 'bg-green-500 border-green-500'
                                                            : 'border-purple-400 hover:border-purple-300'
                                                    }`}
                                                >
                                                    {task.completed && <Check />}
                                                </button>
                                                
                                                <div className="flex-1 min-w-0">
                                                    <div className="flex items-center gap-2 mb-1">
                                                        {task.time && (
                                                            <div className="flex items-center gap-1 text-purple-300 text-sm">
                                                                <Clock />
                                                                <span>{task.time}</span>
                                                            </div>
                                                        )}
                                                    </div>
                                                    <h3 className={`text-lg font-semibold mb-1 ${
                                                        task.completed ? 'text-white/50 line-through' : 'text-white'
                                                    }`}>
                                                        {task.title}
                                                    </h3>
                                                    {task.description && (
                                                        <p className={`text-sm ${
                                                            task.completed ? 'text-purple-400/50' : 'text-purple-300'
                                                        }`}>
                                                            {task.description}
                                                        </p>
                                                    )}
                                                </div>

                                                <button
                                                    onClick={() => deleteTask(selectedDay, task.id)}
                                                    className="flex-shrink-0 p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-all duration-300 opacity-0 group-hover:opacity-100"
                                                >
                                                    <Trash2 />
                                                </button>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<WeekScheduler />, document.getElementById('root'));

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
